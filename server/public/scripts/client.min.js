function eventListeners(a){$("#sellHome").on("submit",addListing),$("#rent").on("keypress",hideCost),$("#cost").on("keypress",hideRent),$("#resetSell").on("click",reload),$(".basket.container").on("click","#nextPageButton",nextPage),$(".admin-container").on("click",".delete",deleteListing)}function getListings(){console.log("getting listings"),$.ajax({type:"GET",url:"/listings",success:function(a){console.log("successful call"),console.log(a),"/"===window.location.pathname?appendListings(a):"/admin"===window.location.pathname&&adminAppend(a)}})}function getRandomAdjIndex(a,b){return a=Math.ceil(a),b=Math.floor(b),Math.floor(Math.random()*(b-a))+a}function appendListings(a){$(".basket.container").empty();for(var b,c=0;c<24;c++){c%2==1?($(".basket.container").append('<div class="row" id="row'+c+'"></div>'),b=$("#row"+c),b.append('<div class="col-md-4 col-md-offset-1" id="property'+c+'"></div>')):c%2==0&&(b=$("#row"+(c-1)),b.append('<div class="col-md-4 col-md-offset-2" id="property'+c+'"></div>'));var d=$("#property"+c);a[c].cost?d.append('<div class="col-md-2 glyph-holder"><span class="glyphicon glyphicon-home"></span></div>'):a[c].rent&&d.append('<div class="col-md-2 glyph-holder"><span class="glyphicon glyphicon-list-alt"></span></div>'),index=getRandomAdjIndex(0,adjArray.length),adjective=adjArray[index],d.append('<div class="col-md-7 location"><p>Located in '+adjective+" "+a[c].city+"!</p></div>");var e=a[c].sqft+" square feet!";if(a[c].cost){var f="Only $"+a[c].cost+" to own!";d.append('<button type="button" class="btn btn-sm btn-info cost col-md-3" data-toggle="popover" data-trigger="focus" title="'+e+'" data-content="'+f+'">Learn More!</button>')}else if(a[c].rent){var g="Only $"+a[c].rent+" a month!";d.append('<button type="button" class="btn btn-sm btn-info rent col-md-3" data-toggle="popover" data-trigger="focus" title="'+e+'" data-content="'+g+'">Learn More!</button>')}}$(function(){$('[data-toggle="popover"]').popover(),b.append('<div class="col-md-4 col-md-offset-2"><button type="submit" class="btn btn-primary" id="nextPageButton"><span id="npbText">More Super Deals!</span></button></div>')})}function adminAppend(a){console.log("adminAppend is working"),$(".admin-container").empty();for(var b=0;b<a.length;b++){$(".admin-container.container").append('<div class="row" id="propAdminView'+b+'"></div>');var c=$("#propAdminView"+b);c.append('<div class="col-md-3 admin-div"><p>'+a[b].sqft+" square feet</p></div>"),c.append('<div class="col-md-3 admin-div"><p>Located in '+a[b].city+"</p></div>"),a[b].cost?c.append('<div class="col-md-3 admin-div"><p>Cost to own: $'+a[b].cost+"</p></div>"):a[b].rent&&c.append('<div class="col-md-3 admin-div"><p>Monthly rent: $'+a[b].rent+"</p></div>"),c.append('<div class="col-md-3 admin-div"><button class="delete btn btn-sm btn-warning" data-buildingid="'+a[b]._id+'">Delete</button></div>')}}function addListing(){if(event.preventDefault(),console.log("submit button works!"),$("#location").val()&&$("#squareFeet").val()&&$("#rent").val()||$("#location").val()&&$("#squareFeet").val()&&$("#cost").val()){var a={city:$("#location").val(),sqft:$("#squareFeet").val()};$("#rent").val()?a.rent=$("#rent").val():$("#cost").val()&&(a.cost=$("#cost").val()),$.ajax({type:"POST",url:"/listings",data:a,success:function(){$("#rent").val(""),$("#cost").val(""),$("#location").val(""),$("#squareFeet").val(""),alertify.alert("Sussman Homes and Gardens says:","Thanks for submitting your home!",function(){alertify.success("Listing added!")})}})}else alertify.alert("Sussman Homes and Gardens says:","Please complete all fields.",function(){alertify.error("Listing not added")})}function hideCost(){$(".cost-form, #or-tag").remove()}function hideRent(){$(".rent-form, #or-tag").remove()}function reload(){window.location.reload(!0)}function nextPage(){window.alert("Over one weekend? On Week FOUR?! Nah man... sorry...")}function deleteListing(){var a=$(this).data("buildingid");console.log(a," will be deleted");var b={id:a};$.ajax({type:"DELETE",url:"/listings",data:b,success:function(a){console.log("delete request returned successfully"),console.log(a),getListings()}})}$(document).ready(function(){window.location.pathname,getListings(),eventListeners(!0)});var adjArray=["pretty","alluring","lovely","charming","delightful","appealing","engaging","winsome","ravishing","gorgeous","stunning","arresting","glamorous","bewitching","beguiling","graceful","elegant","exquisite","aesthetic","artistic","decorative","magnificent","divine","gorgeous","beauteous","comely","fair"],adjective,index;